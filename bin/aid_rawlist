#!/usr/bin/perl -w

#
# makes a list of email addresses, comma separated.
#

require 'aid_util.pl';
require 'getopts.pl';

$usage = 'usage: aid_alpha_html [-h] infile.adr outfile
    -h        Display usage information.
';

&Getopts('h') || die "$usage\n";
$opt_h && die "$usage\n";
$ARGV[0] || die "$usage\n";
$ARGV[1] || die "$usage\n";
$opt_h = $opt_h;		# avoid warning

open(DATA,$ARGV[0]) || die "Can't open $ARGV[0]: $!\n";
open(FMTOUT,">$ARGV[1]") || die "Can't open $ARGV[1]: $!\n";

$output = '';

while(<DATA>) {
    chop;
    %rec = &aid_parse($_);
    next unless $rec{'valid'};

    $output .= $rec{'email'} . ', ';
}

# cut off the last comma and space
chop $output;
chop $output;
print FMTOUT $output, "\n";

exit(0);
