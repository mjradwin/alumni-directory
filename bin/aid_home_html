#!/usr/bin/perl -w

#
# does the html version of just home pages
# $Id: aid_home_html,v 3.10 1998/05/17 05:18:53 mradwin Exp mradwin $
#

require 'aid_util.pl';
require 'getopts.pl';

$usage = 'usage: aid_home_html [-hs] [-i <infile>] -p <pg> -t <text> <outfile>
 -h            Display usage information.
 -s            Create the submit page.
 -i <infile>   Create an "other" page from html code in <infile>.
 -p <pg>       Use page number <pg> for generating content.  REQUIRED.
 -t <text>     Put a tableheader with "text".  REQUIRED.

 <outfile>     Write results to <outfile>.

Either -s or -i must be supplied.  They are mutuallly exclusive.
';

&Getopts('hst:i:p:') || die "$usage\n";
$opt_h && die "$usage\n";
$opt_h = $opt_h;		# avoid warning
%blank_entry = %aid_util'blank_entry = %aid_util'blank_entry;

die "$usage\n" unless $ARGV[0];
die "$usage\n" unless ($opt_s || $opt_i);
die "$usage\n" if     ($opt_s && $opt_i);
die "$usage\n" unless defined($opt_p);
die "$usage\n" unless defined($opt_t);

$infile = $opt_i;
$outfile = $ARGV[0];

if ($opt_i) {
    open(INFILE,$infile) || die "Can't open $infile: $!\n";
    @lines = <INFILE>;
    close(INFILE);
}

open(OUTFILE,">$outfile") || die "Can't open $outfile: $!\n";

print OUTFILE &common_html_hdr($opt_p,$opt_t,0);

if ($opt_s) {
    print OUTFILE &submit_body(*blank_entry,'');
} else { # implicit opt_i
    print OUTFILE @lines;
}
print OUTFILE &common_html_ftr($opt_p);

exit(0);
