#!/usr/local/bin/perl

# does the html version of just home pages
#

#push(@INC, '/home/mjr/lib');
push(@INC, '/home/divcom/mjr/lib');  # divcom
require 'mv_util.pl';
require 'getopts.pl';

$usage = 'usage: mv_home_html [-h] {-i | -s}
    -h        Display usage information.
    -i        Create the index page
    -s        Create the submit page
';

&Getopts('his') || die "$usage\n";
$opt_h && die "$usage\n";
$opt_i || $opt_s || die "$usage\n";
$opt_i && $opt_s && die "$usage\n";
$pageno = 0;
$pageno = 5 if $opt_s;

$home = &mv_config('wwwdir') . ".home.include";
$fmtout = ($opt_i) ? &mv_config('wwwdir') . "index.html"
    : &mv_config('wwwdir') . "add.html";

open(FMTOUT,">$fmtout") || die "Can't open $fmtout: $!\n";

print FMTOUT &common_html_hdr($pageno);
if ($opt_i) {
    open(HOME,$home) || die "Can't open $home: $!\n";
    @lines = <HOME>;
    print FMTOUT @lines;
    close(HOME);
} else {
    print FMTOUT &submit_body(";-1;1;;;;MVHS;;;",0,0);
}

print FMTOUT &common_html_ftr($pageno);

exit(0);
