#!/usr/bin/perl -w

# does the html version of just home pages

require 'getopts.pl';
require 'aid_util.pl';

$usage = 'usage: aid_www_html [-h] infile.adr outfile
    -h        Display usage information.
';

&Getopts('h') || die "$usage\n";
$opt_h && die "$usage\n";
$ARGV[0] || die "$usage\n";
$ARGV[1] || die "$usage\n";
$opt_h = $opt_h;		# avoid warning

$info_gif = &aid_image_tag('info');
$blank_gif = &aid_image_tag('blank');

open(DATA,$ARGV[0]) || die "Can't open $ARGV[0]: $!\n";
open(FMTOUT,">$ARGV[1]") || die "Can't open $ARGV[1]: $!\n";

print FMTOUT &common_html_hdr(5,'Alumni with Web Pages',1);
print FMTOUT &common_intro_para(1);
print FMTOUT "<pre>";
print FMTOUT "Name and Graduation Year$blank_gif                  Email\n";
print FMTOUT "---------------------------------------------------------------------------\n";

while(<DATA>) {
    chop;
    %rec = &aid_parse($_);
    next unless $rec{'valid'};
    next if $rec{'homepage'} eq '';

    $fullname = &fullname(*rec);
    ($affil,$len) = &affiliate(*rec,1,'foob');

    print FMTOUT "<a href=\"" . &aid_about_path(*rec) . "\">$info_gif</a>"; #'#
    print FMTOUT "<a name=\"$rec{'alias'}\"";
    print FMTOUT ' ' x (8 - (length($rec{'alias'})));
    print FMTOUT " href=\"$rec{'homepage'}\"";
    print FMTOUT ">";
    print FMTOUT $fullname;
    print FMTOUT "</a>";
    print FMTOUT $affil;
    print FMTOUT ' ', ' ' x (41 - (length($fullname) + $len));
    print FMTOUT "<a href=\"mailto:", $rec{'email'}, "\">", $rec{'email'}, "</a>";
    print FMTOUT " " . &aid_image_tag('new_anchored') if &is_new($rec{'time'});
    print FMTOUT "\n";
}

print FMTOUT "</pre>\n";
print FMTOUT &common_html_ftr(5);

exit(0);
