#!/usr/local/bin/perl

# does the html version of the recent address list
#



require 'mv_util.pl';
require 'tableheader.pl';

die "Usage: mv_goners_html infile.adr outfile.html\n" if !$ARGV[0] || !$ARGV[1];
open(MVHS,$ARGV[0]) || die "Can't open $ARGV[0]: $!\n";
open(FMTOUT,">$ARGV[1]") || die "Can't open $ARGV[1]: $!\n";

print FMTOUT &common_html_hdr(-1,1);
print FMTOUT "<br>";
print FMTOUT &tableheader("Alumni with Invalid Addresses", 1, 'ffff99',
'000000', 1);
print FMTOUT "
<p>The following addresses are invalid because either email to them
bounces, or the address is being used by a new owner.  If you know a
current email address for anyone on this list, please <a
href=\"add.html\">submit it</a>!</p>
";
print FMTOUT "<pre>";
print FMTOUT "Name and Graduation Year                  Last known whereabouts\n";
print FMTOUT "---------------------------------------------------------------------------\n";

while(<MVHS>) {
    chop;
    ($time,$id,$req,$last,$first,$married,
     $school,$year,$email,$alias,$homepage,$location) = &mv_parse($_);

    $fullname = &fullname($first,$last,$married);
    $affil = &affiliate($year,$school);

    print FMTOUT $fullname;
    print FMTOUT $affil;
    print FMTOUT ' ', ' ' x (41 - (length($fullname) + length($affil)));
    print FMTOUT $email;
    print FMTOUT "\n";
}

print FMTOUT "</pre>\n";
print FMTOUT &common_html_ftr(-1, "Invalid&nbsp;Addresses");

exit(0);
